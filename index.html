<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CDN å·¥å…·ç®±</title>
  <link rel="stylesheet" href="index.css">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
</head>

<body>
  <div id="app" v-cloak>
    <header class="header">
      <h1>CDN å·¥å…·ç®±</h1>
      <div class="theme-toggle">
        <span @click="isNewWin = !isNewWin" :class="{ opacity: !isNewWin }" title="æ˜¯å¦æ–°çª—å£æ‰“å¼€">ğŸ›ï¸</span> 
        <span @click="toggleTheme"> {{ isDarkMode ? 'ğŸŒ™' : 'â˜€ï¸' }}</span>
      </div>
    </header>

    <main class="container">
      <section class="cdn-section">
        <h2>é€‰æ‹© CDN æº</h2>
        <div class="cdn-options">
          <label v-for="(cdn, index) in appData.cdn" :key="index" class="cdn-option">
            <input type="radio" name="cdn" :value="index" v-model="selectedCdn" @change="updateCdnUrls">
            <span class="cdn-name">{{ cdn.name }}</span>
            <span class="cdn-latency" v-if="cdn.latency !== null">({{ cdn.latency }})</span>
            <span class="cdn-latency loading" v-else-if="cdn.loading">(æµ‹è¯•ä¸­...)</span>
          </label>
        </div>
      </section>

      <!-- JS åº“åˆ—è¡¨ -->
      <section class="libs-section">
        <h2>å¸¸ç”¨ JS åº“ <input type="text" v-model="searchText" placeholder="è¾“å…¥å…³é”®å­—æœç´¢..." /></h2>
        <div class="table-container">
          <table class="libs-table">
            <thead><tr><th>åº“å</th><th>ç‰ˆæœ¬</th><th>CDN åœ°å€</th><th>æ“ä½œ</th></tr></thead>
            <tbody>
              <tr v-for="(lib, index) in filterLibs" :key="index">
                <td>{{ lib.zname || lib.name }}</td>
                <td>{{ lib.version }}</td>
                <td class="cdn-url"><code>{{ lib.cdnUrl}}</code></td>
                <td class="actions">
                  <button class="btn btn-copy" @click="copyUrl(lib.cdnUrl)">å¤åˆ¶</button>
                  <button class="btn btn-copy" @click="copyUrl(lib.cdnUrl, true)">æ ‡ç­¾</button>
                  <button class="btn btn-open" @click="openUrl(lib)">æ‰“å¼€</button>
                  <button class="btn btn-open" @click="openUrl(lib, 'dist/')">æ‰“å¼€dist</button>
                  <button class="btn btn-open" @click="getFileSize(lib, lib.cdnUrl)">å¤§å°</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- HTML æ¨¡æ¿é…ç½® -->
      <section class="template-section">
        <h2>HTML æ¨¡æ¿é…ç½®</h2>
        <div class="template-controls">
          <select v-model="selectedTemplate" @change="generateTemplate" class="template-select">
            <option value="">é€‰æ‹©æ¨¡æ¿</option>
            <option value="vue2">Vue 2 æ¨¡æ¿</option>
            <option value="vue3">Vue 3 æ¨¡æ¿</option>
            <option value="layui">Layui æ¨¡æ¿</option>
            <option value="basic">åŸºç¡€JQueryæ¨¡æ¿</option>
            <option value="loading">åŠ è½½</option>
          </select>
          <button class="btn btn-copy-template" @click="copyUrl(htmlTemplate)" :disabled="!htmlTemplate">
            å¤åˆ¶æ¨¡æ¿
          </button>
          <button class="btn" @click="previewUrl(htmlTemplate)" :disabled="!htmlTemplate">
            é¢„è§ˆ
          </button>
        </div>
        <div v-if="htmlTemplate" class="template-preview">
          <pre class="language-html"><code class="language-html">{{ htmlTemplate }}</code></pre>
        </div>
      </section>
    </main>

    <!-- æç¤ºæ¶ˆæ¯ -->
    <div class="toast" :class="{ show: showToast }" @click="showToast = false">
      {{ toastMessage }}
    </div>

    <div class="dialog" v-show="dialogShow" @click.self="dialogShow = false">
      <div class="dialog-cont">
        <h3>{{ iframeSrc }}
          <button class="btn btn-copy-template" @click="copyUrl(iframeSrc)">å¤åˆ¶</button>
          <button class="btn btn-copy-template" @click="copyUrl(iframeSrc, true)">å¤åˆ¶æ ‡ç­¾</button>
          <button class="btn" @click="openNewUrl(iframeSrc)">æ–°æ‰“å¼€</button>
        </h3>
        <iframe v-if="dialogShow" :src="iframeSrc" class="dialog-iframe" frameborder="0"></iframe>
      </div>
    </div>
  </div>

  <script src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/prism/1.30.0/prism.min.js"></script>
  <link href="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/prism/1.30.0/themes/prism.min.css" rel="stylesheet">
  <script src="https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/vue/3.5.17/vue.global.prod.js"></script>
  <script src="data.js"></script>
  <script src="index.js"></script>
</body>

</html>